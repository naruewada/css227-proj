<%- include('partials/header.ejs') %>
<link rel="stylesheet" href="../stylesheets/admin.css">


<% var i=1;User.forEach(function(user){ %>
    <div style="width: 100%;margin-top:5px">
        <div class="card  bg-dark " style="width: 50%;border:2px solid rgb(245, 182, 11)">
            <div class="row">
                <img class="col-3" src="<%= user.picture %>" width="20rem" height="125rem">
                <h5 class="mt-3 mx-3 col" style="color: white; text-transform: uppercase;">
                    <p class="mt-3" style="color: rgb(245, 182, 11);">member :<span style="color: aliceblue;"> <%= user.firstname %></span></p>
                    <p class="mt-3" style="color: rgb(245, 182, 11);"> state :<span style="color: aliceblue;"> <%= user.state %></span></p>
                    <div class="text-end mt-2">
                        <form action="/user/admin/grant/<%= user._id %>" method="POST">
                            <button type="submit" class="btn  btn-warning" >Grant Admin</button>
                        </form>
                        &nbsp;
                        <form action="/user/admin/delete/<%= user._id %>" method="POST">
                            <button type="button" class="btn btn-delete btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal<%= i %>" >Delete Account</button>
                            <div class="modal fade" id="deleteModal<%= i %>" data-bs-backdrop="static" tabindex="-1">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">DELETE account</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">delete member</button>
                                        </div>
                                        <div class="modal-body">
                                            Do you want to delete this member? 
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                            <button type="submit" class="btn btn-primary">Confirm</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                </h5>
            </div>
        </div>
    </div>

<% i++ }); %>

<% if ( currentUser.state == 'cheif' ) { %>
        <div class="container-fluid px-1 pt-3" style="height: 70px; background-color: rgb(26, 26, 26);">
            <h4 style="color: white;">
                &emsp; Admin
            </h4>
        </div>

        <% var i= 1 ; Admin.forEach(function(user){ %>
            <div style="width: 100%; padding-left: 400px; padding-right: 400px;">
                <div class="card card-cover text-white bg-dark rounded-5 shadow-lg">
                    <div class="row">
                        <img class="col-3" src="<%= user.picture %>" width="150px" height="150px">
                        <h5 class="mt-3 mx-3 col" style="color: white; text-transform: uppercase;">
                            <p class="mt-3" style="color: rgb(128, 0, 0);">state : <%= user.firstname %></p>
                            <p class="mt-3" style="color: rgb(128, 0, 0);">state : <%= user.state %></p>
                            <div class="text-end mt-2">
                                <form action="/user/admin/forfeit/<%= user._id %>" method="POST">
                                    <button type="submit" class="btn btn-outline-light" style="width: 200px">Forfeit Admin</button>
                                </form>
                                &nbsp;
                                <form action="/user/admin/delete/<%= user._id %>" method="POST">
                                    <button type="button" class="btn btn-delete" data-bs-toggle="modal" data-bs-target="#deleteModal<%= i %>" style="border: 2px solid white;color:aliceblue;">Delete Account</button>
                            <div class="modal fade" id="deleteModal<%= i %>" data-bs-backdrop="static" tabindex="-1">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">DELETE MOVIE</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">delete admin</button>
                                        </div>
                                        <div class="modal-body">
                                            Do you want to delete this admin? 
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                            <button type="submit" class="btn btn-primary">Confirm</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </form>
                            </div>
                        </h5>
                    </div>
                </div>
            </div>
            &ebsp;
        <% i++ }); %>
<% } %>


<%- include('partials/footer.ejs') %>